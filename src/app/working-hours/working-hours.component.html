<div class="container">
  <div class="working-hours-page">
    <h2>Task Updation</h2>

    <!-- Date Picker -->
    <div class="form-header">
      <label for="date">Date:</label>
      <input type="date" id="date" [(ngModel)]="date" name="date" required />
    </div>

    <!-- Table for Employee Details -->
    <table>
      <thead>
        <tr>
          <th>Employee ID</th>
          <th>First Name</th>
          <th>Last Name</th>
          <th>Tasks Assigned</th>
          <th>Tasks Completed</th>
          <th>Tasks Completed On Time</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let row of workingHoursData; let i = index">
          <td>
            <input
              type="text"
              placeholder="Enter Employee ID"
              [(ngModel)]="row.employeeId"
              name="employeeId-{{ i }}"
              required
              (blur)="fetchEmployeeName(i)" 
            />
          </td>
          <td>
            <input
              type="text"
              [(ngModel)]="row.firstName"
              name="firstName-{{ i }}"
              placeholder="Employee First Name"
              readonly
            />
          </td>
          <td>
            <input
              type="text"
              [(ngModel)]="row.lastName"
              name="lastName-{{ i }}"
              placeholder="Employee Last Name"
              readonly
            />
          </td>
          <td>
            <!-- Task Assigned Dropdown -->
            <select
              [(ngModel)]="row.tasksAssigned"
              name="tasksAssigned-{{ i }}"
              class="form-drop"
              required
            >
              <option value="0">0</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
            </select>
          </td>
          <td>
            <!-- Tasks Completed Dropdown -->
            <select
              [(ngModel)]="row.tasksCompleted"
              name="tasksCompleted-{{ i }}"
              class="form-drop"
              required
            >
              <option value="0">0</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
            </select>
          </td>
          <td>
            <!-- Tasks Completed On Time Dropdown -->
            <select
              [(ngModel)]="row.tasksCompletedOnTime"
              name="tasksCompletedOnTime-{{ i }}"
              class="form-drop"
              required
            >
              <option value="0">0</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
            </select>
          </td>
          <td>
            <button type="button" class="remove-button" (click)="removeRow(i)">Remove</button>
          </td>
        </tr>
      </tbody>
    </table>

    <form (ngSubmit)="onSubmit()">
      <div class="form-actions">
        <button type="button" (click)="addRow()">Add Row</button>
        <button type="submit">Submit</button>
      </div>
    </form>
  </div>
</div>
